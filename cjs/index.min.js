"use strict";var e=require("ip"),r=require("open"),o=require("cross-spawn"),n=require("picocolors"),t=require("child_process");function c(e,r,o){if(o||2===arguments.length)for(var n,t=0,c=r.length;t<c;t++)!n&&t in r||(n||(n=Array.prototype.slice.call(r,0,t)),n[t]=r[t]);return e.concat(n||Array.prototype.slice.call(r))}function i(e,i){var s="string"==typeof i?i:process.env.BROWSER||"";return s.toLowerCase().endsWith(".js")?function(e,r){var t=process.argv.slice(2);return o(process.execPath,c(c([e],t,true),[r],false),{stdio:"inherit"}).on("close",(function(r){if(0!==r)return console.log(),console.log(n.red("The script specified as BROWSER environment variable failed.")),console.log(n.cyan(e)+" exited with code "+r+"."),void console.log()})),!0}(s,e):"none"!==s.toLowerCase()&&function(e,o){if("darwin"===process.platform&&(""===e||"google chrome"===e))try{return t.execSync('ps cax | grep "Google Chrome"'),t.execSync('osascript openChrome.applescript "'+encodeURI(o)+'"',{cwd:__dirname,stdio:"ignore"}),!0}catch(e){}"darwin"===process.platform&&"open"===e&&(e=void 0);try{return r(o,e?{app:{name:e}}:{}).catch((function(){})),!0}catch(e){return!1}}(s,e)}var s=function(){function e(e){this.url=a(e),this.browser=(null==e?void 0:e.browser)||"google chrome"}return e.prototype.getLocalIP=function(){return l()},e.prototype.open=function(e,r){i(r=r||this.url,e=e||this.browser)},e}();function l(){return e.address()}var a=function(e){if(null==e?void 0:e.url)return null==e?void 0:e.url;var r=(null==e?void 0:e.ip)?l():"localhost",o=(null==e?void 0:e.port)||3e3,n=null==e?void 0:e.path;return n=(null==n?void 0:n.startsWith("/"))?null==n?void 0:n.slice(1):n,"http://".concat(r,":").concat(o,"/").concat(n||"")};module.exports=s;

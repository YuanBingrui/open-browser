"use strict";var o=require("ip"),e=require("node:path"),r=require("node:child_process"),n=require("open"),t=require("cross-spawn"),i=require("picocolors");function c(o,e,r){if(r||2===arguments.length)for(var n,t=0,i=e.length;t<i;t++)!n&&t in e||(n||(n=Array.prototype.slice.call(e,0,t)),n[t]=e[t]);return o.concat(n||Array.prototype.slice.call(e))}function l(o,l){var a="string"==typeof l?l:process.env.BROWSER||"";return a.toLowerCase().endsWith(".js")?function(o,e){var r=process.argv.slice(2);return t(process.execPath,c(c([o],r,true),[e],false),{stdio:"inherit"}).on("close",(function(e){if(0!==e)return console.log(),console.log(i.red("The script specified as BROWSER environment variable failed.")),console.log(i.cyan(o)+" exited with code "+e+"."),void console.log()})),!0}(a,o):"none"!==a.toLowerCase()&&function(o,t){var i="google chrome"===o?"Google Chrome":o;if("darwin"===process.platform&&(!i||s.includes(i)))try{var c=r.execSync("ps cax").toString(),l=i&&c.includes(i)?i:s.find((function(o){return c.includes(o)}));return r.execSync('osascript openChrome.applescript "'.concat(encodeURI(t),'" "').concat(l,'"'),{cwd:e.join(__dirname,"../"),stdio:"ignore"}),!0}catch(o){}"darwin"===process.platform&&"open"===o&&(o=void 0);try{return n(t,o?{app:{name:o}}:{}).catch((function(){})),!0}catch(o){return!1}}(a,o)}var s=["Google Chrome Canary","Google Chrome Dev","Google Chrome Beta","Google Chrome","Microsoft Edge","Brave Browser","Vivaldi","Chromium"];var a=function(){function o(o){this.url=p(o),this.browser=(null==o?void 0:o.browser)||"google chrome"}return o.prototype.getLocalIP=function(){return u()},o.prototype.open=function(o,e){l(e=e||this.url,o=o||this.browser)},o}();function u(){return o.address()}var p=function(o){if(null==o?void 0:o.url)return null==o?void 0:o.url;var e=(null==o?void 0:o.ip)?u():"localhost",r=(null==o?void 0:o.port)||3e3,n=null==o?void 0:o.path;return n=(null==n?void 0:n.startsWith("/"))?null==n?void 0:n.slice(1):n,"http://".concat(e,":").concat(r,"/").concat(n||"")};module.exports=a;
